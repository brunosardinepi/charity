{% extends '_layout.html' %}
{% load static from staticfiles %}

{% block meta %}
    <meta name="description" content="Search for Pages and Campaigns on PageFund using keywords and filters.">
{% endblock %}

{% block title %} Search | {{ block.super }}{% endblock %}

{% block body_content %}
    <form>
        <div class="row mt-4 mb-3">
            <div class="col-12 text-center">
                <h1>Search for Pages and Campaigns</h1>
            </div>
        </div>
        <div class="row mb-3">
            <div class="col-8 offset-2">
                {% csrf_token %}
                <div class="form-group">
                    <label for="q" class="sr-only">Search</label>
                    <input id="q" type="text" class="form-control form-control-lg" placeholder="Search" />
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-2">

                <h5>Filters</h5>

                {% for k, v in categories.items %}
                    <div class="form-check">
                        <input class="form-check-input" name="filters[]" type="checkbox" value="{{ k }}" />{{ v }}
                    </div>
                {% endfor %}

                <div class="row mt-2">
                    <div class="col-12">
                        <a href="" id="checkall">Select all</a>
                    </div>
                </div>

                <div class="row mt-5">
                    <div class="col-12">
                        <a href="" id="allPages">List all Pages</a>
                    </div>
                </div>
                <div class="row mb-3">
                    <div class="col-12">
                        <a href="" id="allCampaigns">List all Campaigns</a>
                    </div>
                </div>

            </div>
            <div class="col">
                <div id="results"></div>
            </div>
        </div>
    </form>
{% endblock %}

{% block body_extra %}
    <script src="{% static 'js/comment_csrf.js' %}"></script>
    <script>
        {% if query_from_search %}
            var sq = "{{ query_from_search }}";
            $( document ).ready(function() {
                $("#q").val(sq).trigger("keyup"); ;
            });
        {% endif %}
    </script>
    <script src="{% static 'js/search.js' %}"></script>
{% endblock %}
